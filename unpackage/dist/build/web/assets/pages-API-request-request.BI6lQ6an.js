import{M as e,I as s,P as t,m as a,p as n,q as o,A as i,o as l,s as r,j as c,an as u,K as d}from"./index-DQotwNSd.js";import{_ as m}from"./page-head.CAicG8M0.js";import{r as g}from"./uni-app.es.Dfk47BXh.js";import{_ as p}from"./_plugin-vue_export-helper.BCo6x5W8.js";const h="https://unidemo.dcloud.net.cn/ajax/echo/text?name=uni-app",f=2e3;const q=p({data:()=>({title:"request",loading:!1,res:""}),methods:{sendRequest(e){switch(this.loading=!0,e){case"promise":this._requestPromise();break;case"await":this._requestAwait();break;default:this._request()}},_request(){e({url:h,dataType:"text",data:{noncestr:Date.now()},success:e=>{console.log("request success",e),s({title:"请求成功",icon:"success",mask:!0,duration:f}),this.res="请求结果 : "+JSON.stringify(e)},fail:e=>{console.log("request fail",e),t({content:e.errMsg,showCancel:!1})},complete:()=>{this.loading=!1}})},_requestPromise(){e({url:h,dataType:"text",data:{noncestr:Date.now()}}).then((e=>{console.log("request success",e),s({title:"请求成功",icon:"success",mask:!0,duration:f}),this.res="请求结果 : "+JSON.stringify(e),this.loading=!1})).catch((e=>{console.log("request fail",e),t({content:e.errMsg,showCancel:!1}),this.loading=!1}))},async _requestAwait(){let a,n;try{a=await e({url:h,dataType:"text",data:{noncestr:Date.now()}})}catch(o){n=o}n?(console.log("request fail",n),t({content:n.errMsg,showCancel:!1})):(console.log("request success",a),s({title:"请求成功",icon:"success",mask:!0,duration:f}),this.res="请求结果 : "+JSON.stringify(a)),this.loading=!1}}},[["render",function(e,s,t,p,h,f){const q=g(a("page-head"),m),_=i,y=u,w=d;return l(),n(_,null,{default:o((()=>[r(q,{title:h.title},null,8,["title"]),r(_,{class:"uni-padding-wrap uni-common-mt"},{default:o((()=>[r(_,{class:"uni-hello-text"},{default:o((()=>[c(" 请点击按钮向服务器发起请求 ")])),_:1}),r(_,{class:"uni-textarea uni-common-mt"},{default:o((()=>[r(y,{value:h.res},null,8,["value"])])),_:1}),r(_,{class:"uni-btn-v uni-common-mt"},{default:o((()=>[r(w,{type:"primary",onClick:f.sendRequest,loading:h.loading},{default:o((()=>[c("发起请求（Callback）")])),_:1},8,["onClick","loading"]),r(w,{type:"primary",onClick:s[0]||(s[0]=e=>f.sendRequest("promise")),loading:h.loading},{default:o((()=>[c("发起请求（Promise）")])),_:1},8,["loading"]),r(w,{type:"primary",onClick:s[1]||(s[1]=e=>f.sendRequest("await")),loading:h.loading},{default:o((()=>[c("发起请求（Async/Await）")])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})}]]);export{q as default};
