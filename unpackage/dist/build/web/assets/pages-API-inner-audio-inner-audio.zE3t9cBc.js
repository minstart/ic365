import{b1 as i,m as a,p as n,q as t,A as s,o,s as e,a2 as l,x as r}from"./index-DQotwNSd.js";import{_ as u}from"./page-head.CAicG8M0.js";import{r as h}from"./uni-app.es.Dfk47BXh.js";import{_ as d}from"./_plugin-vue_export-helper.BCo6x5W8.js";const g=d({data:()=>({title:"innerAudioContext",isPlaying:!1,isPlayEnd:!1,currentTime:0,duration:100}),computed:{position(){return this.isPlayEnd?0:this.currentTime},playImage(){return this.isPlaying?"/static/pause.png":"/static/play.png"}},onLoad(){this._isChanging=!1,this._audioContext=null,this.createAudio()},onUnload(){null!=this._audioContext&&this.isPlaying&&this.stop()},methods:{createAudio(){var a=this._audioContext=i();return a.autoplay=!1,a.src="https://web-ext-storage.dcloud.net.cn/uni-app/ForElise.mp3",a.onPlay((()=>{console.log("开始播放")})),a.onTimeUpdate((i=>{!0!==this._isChanging&&(this.currentTime=a.currentTime||0,this.duration=a.duration||0)})),a.onEnded((()=>{this.currentTime=0,this.isPlaying=!1,this.isPlayEnd=!0})),a.onError((i=>{this.isPlaying=!1,console.log(i.errMsg),console.log(i.errCode)})),a},onchanging(){this._isChanging=!0},onchange(i){console.log(i.detail.value),console.log(typeof i.detail.value),this._audioContext.seek(i.detail.value),this._isChanging=!1},play(){this.isPlaying?this.pause():(this.isPlaying=!0,this._audioContext.play(),this.isPlayEnd=!1)},pause(){this._audioContext.pause(),this.isPlaying=!1},stop(){this._audioContext.stop(),this.isPlaying=!1}}},[["render",function(i,d,g,p,c,m){const y=h(a("page-head"),u),C=l,_=s,x=r;return o(),n(_,{class:"uni-padding-wrap"},{default:t((()=>[e(y,{title:"audio"}),e(_,{class:"uni-common-mt"},{default:t((()=>[e(C,{value:m.position,min:0,max:c.duration,onChanging:m.onchanging,onChange:m.onchange},null,8,["value","max","onChanging","onChange"])])),_:1}),e(_,{class:"play-button-area"},{default:t((()=>[e(x,{class:"icon-play",src:m.playImage,onClick:m.play},null,8,["src","onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-1ca7f450"]]);export{g as default};
