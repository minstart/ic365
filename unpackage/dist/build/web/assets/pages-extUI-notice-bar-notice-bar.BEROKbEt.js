import{ap as e,m as t,o as i,p as o,q as n,h as l,s as a,n as s,i as r,j as c,t as u,y as d,A as h,I as p}from"./index-DQotwNSd.js";import{_ as m}from"./uni-card.DtmtsBix.js";import{r as f}from"./uni-app.es.Dfk47BXh.js";import{_ as b}from"./uni-icons.DpKtHwQd.js";import{_ as y}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as w}from"./uni-section.DD6p8Tlx.js";const _=y({name:"UniNoticeBar",emits:["click","getmore","close"],props:{text:{type:String,default:""},moreText:{type:String,default:""},backgroundColor:{type:String,default:"#FFF9EA"},speed:{type:Number,default:100},color:{type:String,default:"#FF9A43"},fontSize:{type:Number,default:14},moreColor:{type:String,default:"#FF9A43"},single:{type:[Boolean,String],default:!1},scrollable:{type:[Boolean,String],default:!1},showIcon:{type:[Boolean,String],default:!1},showGetMore:{type:[Boolean,String],default:!1},showClose:{type:[Boolean,String],default:!1}},data:()=>({textWidth:0,boxWidth:0,wrapWidth:"",webviewHide:!1,elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,elIdBox:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,show:!0,animationDuration:"none",animationPlayState:"paused",animationDelay:"0s"}),watch:{text:function(e,t){this.initSize()}},computed:{isShowGetMore(){return!0===this.showGetMore||"true"===this.showGetMore},isShowClose(){return!(!0!==this.showClose&&"true"!==this.showClose||!1!==this.showGetMore&&"false"!==this.showGetMore)}},mounted(){this.$nextTick((()=>{this.initSize()}))},methods:{initSize(){if(this.scrollable){let t=[],i=new Promise(((t,i)=>{e().in(this).select(`#${this.elId}`).boundingClientRect().exec((e=>{this.textWidth=e[0].width,t()}))})),o=new Promise(((t,i)=>{e().in(this).select(`#${this.elIdBox}`).boundingClientRect().exec((e=>{this.boxWidth=e[0].width,t()}))}));t.push(i),t.push(o),Promise.all(t).then((()=>{this.animationDuration=this.textWidth/this.speed+"s",this.animationDelay=`-${this.boxWidth/this.speed}s`,setTimeout((()=>{this.animationPlayState="running"}),1e3)}))}},loopAnimation(){},clickMore(){this.$emit("getmore")},close(){this.show=!1,this.$emit("close")},onClick(){this.$emit("click")}}},[["render",function(e,p,m,y,w,_){const g=f(t("uni-icons"),b),x=d,S=h;return w.show?(i(),o(S,{key:0,class:"uni-noticebar",style:r({backgroundColor:m.backgroundColor}),onClick:_.onClick},{default:n((()=>[!0===m.showIcon||"true"===m.showIcon?(i(),o(g,{key:0,class:"uni-noticebar-icon",type:"sound",color:m.color,size:1.5*m.fontSize},null,8,["color","size"])):l("",!0),a(S,{ref:"textBox",class:s(["uni-noticebar__content-wrapper",{"uni-noticebar__content-wrapper--scrollable":m.scrollable,"uni-noticebar__content-wrapper--single":!m.scrollable&&(m.single||m.moreText)}]),style:r({height:m.scrollable?1.5*m.fontSize+"px":"auto"})},{default:n((()=>[a(S,{id:w.elIdBox,class:s(["uni-noticebar__content",{"uni-noticebar__content--scrollable":m.scrollable,"uni-noticebar__content--single":!m.scrollable&&(m.single||m.moreText)}])},{default:n((()=>[a(x,{id:w.elId,ref:"animationEle",class:s(["uni-noticebar__content-text",{"uni-noticebar__content-text--scrollable":m.scrollable,"uni-noticebar__content-text--single":!m.scrollable&&(m.single||m.showGetMore)}]),style:r({color:m.color,fontSize:m.fontSize+"px",lineHeight:1.5*m.fontSize+"px",width:w.wrapWidth+"px",animationDuration:w.animationDuration,"-webkit-animationDuration":w.animationDuration,animationPlayState:w.webviewHide?"paused":w.animationPlayState,"-webkit-animationPlayState":w.webviewHide?"paused":w.animationPlayState,animationDelay:w.animationDelay,"-webkit-animationDelay":w.animationDelay})},{default:n((()=>[c(u(m.text),1)])),_:1},8,["id","class","style"])])),_:1},8,["id","class"])])),_:1},8,["class","style"]),_.isShowGetMore?(i(),o(S,{key:1,class:"uni-noticebar__more uni-cursor-point",onClick:_.clickMore},{default:n((()=>[m.moreText.length>0?(i(),o(x,{key:0,style:r({color:m.moreColor,fontSize:m.fontSize+"px"})},{default:n((()=>[c(u(m.moreText),1)])),_:1},8,["style"])):(i(),o(g,{key:1,type:"right",color:m.moreColor,size:1.1*m.fontSize},null,8,["color","size"]))])),_:1},8,["onClick"])):l("",!0),_.isShowClose?(i(),o(S,{key:2,class:"uni-noticebar-close uni-cursor-point"},{default:n((()=>[a(g,{type:"closeempty",color:m.color,size:1.1*m.fontSize,onClick:_.close},null,8,["color","size","onClick"])])),_:1})):l("",!0)])),_:1},8,["style","onClick"])):l("",!0)}],["__scopeId","data-v-a72af3d1"]]);const g=y({components:{},data:()=>({}),created(){},methods:{getMore(){p({title:"点击查看更多",icon:"none"})}}},[["render",function(e,l,s,r,u,p){const b=d,y=f(t("uni-card"),m),g=f(t("uni-notice-bar"),_),x=f(t("uni-section"),w),S=h;return i(),o(S,{class:"container"},{default:n((()=>[a(y,{"is-full":"","is-shadow":!1},{default:n((()=>[a(b,{class:"uni-h6"},{default:n((()=>[c("通告栏组件多用于系统通知，广告通知等场景，可自定义图标，颜色，展现方式等。")])),_:1})])),_:1}),a(x,{title:"多行显示",type:"line"},{default:n((()=>[a(g,{text:"uni-app 版正式发布，开发一次，同时发布iOS、Android、H5、微信小程序、支付宝小程序、百度小程序、头条小程序等7大平台。"})])),_:1}),a(x,{title:"单行显示",subTitle:"使用 single 属性单行显示通知",type:"line"},{default:n((()=>[a(g,{single:"",text:"uni-app 版正式发布，开发一次，同时发布iOS、Android、H5、微信小程序、支付宝小程序、百度小程序、头条小程序等7大平台。"})])),_:1}),a(x,{title:"显示图标",subTitle:"使用 show-icon 属性显示左侧小喇叭图标",type:"line"},{default:n((()=>[a(g,{"show-icon":"",text:"uni-app发布，开发一次、7端覆盖！"})])),_:1}),a(x,{title:"文字滚动",subTitle:"使用 scrollable 属性使通告滚动,此时 single 属性将失效,始终单行显示",type:"line"},{default:n((()=>[a(g,{"show-icon":"",scrollable:"",text:"uni-app 版正式发布，开发一次，同时发布iOS、Android、H5、微信小程序、支付宝小程序、百度小程序、头条小程序等7大平台。"})])),_:1}),a(x,{title:"查看更多",subTitle:"使用 show-get-more 显示更多,此时 single 属性将失效,始终单行显示,如不配置 more-text 属性 ,将显示箭头图标",type:"line"},{default:n((()=>[a(g,{"show-get-more":"","show-icon":"",text:"年末大礼：uni-app1.4 新增百度、支付宝小程序。插件市场重磅上线！",onGetmore:p.getMore},null,8,["onGetmore"]),a(g,{"show-get-more":"","show-icon":"","more-text":"查看更多",text:"年末大礼：uni-app1.4 新增百度、支付宝小程序。插件市场重磅上线！",onGetmore:p.getMore},null,8,["onGetmore"])])),_:1}),a(x,{title:"修改颜色",type:"line"},{default:n((()=>[a(g,{single:"",color:"#2979FF","background-color":"#EAF2FF",text:"uni-app 1.6版正式发布，开发一次，同时发布iOS、Android、H5、微信小程序、支付宝小程序、百度小程序、头条小程序等7大平台。"})])),_:1}),a(x,{title:"关闭按钮",subTitle:"使用 show-close 属性,可关闭通知",type:"line"},{default:n((()=>[a(g,{"show-close":"",single:"",text:"HBuilderX 1.0正式发布！uni-app实现里程碑突破实现里程碑突破！"})])),_:1})])),_:1})}],["__scopeId","data-v-e22bc222"]]);export{g as default};
