import{Z as e,o as s,p as t,q as a,s as r,n as i,i as o,al as l,bn as n,h as c,A as h,m as d,j as w,d as u,f,F as _,y as m,K as p,_ as y,t as g}from"./index-DQotwNSd.js";import{_ as k}from"./uni-card.DtmtsBix.js";import{r as b}from"./uni-app.es.Dfk47BXh.js";import{_ as D}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as v}from"./uni-section.DD6p8Tlx.js";const L=D({name:"UniDrawer",components:{keypress:{name:"Keypress",props:{disable:{type:Boolean,default:!1}},mounted(){const e={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]};document.addEventListener("keyup",(s=>{if(this.disable)return;const t=Object.keys(e).find((t=>{const a=s.key,r=e[t];return r===a||Array.isArray(r)&&r.includes(a)}));t&&setTimeout((()=>{this.$emit(t,{})}),0)}))},render:()=>{}}},emits:["change"],props:{mode:{type:String,default:""},mask:{type:Boolean,default:!0},maskClick:{type:Boolean,default:!0},width:{type:Number,default:220}},data:()=>({visibleSync:!1,showDrawer:!1,rightMode:!1,watchTimer:null,drawerWidth:220}),created(){this.drawerWidth=this.width,this.rightMode="right"===this.mode},methods:{clear(){},close(e){("mask"!==e||this.maskClick)&&this.visibleSync&&this._change("showDrawer","visibleSync",!1)},open(){this.visibleSync||this._change("visibleSync","showDrawer",!0)},_change(e,s,t){this[e]=t,this.watchTimer&&clearTimeout(this.watchTimer),this.watchTimer=setTimeout((()=>{this[s]=t,this.$emit("change",t)}),t?50:300)}}},[["render",function(d,w,u,f,_,m){const p=h,y=e("keypress");return _.visibleSync?(s(),t(p,{key:0,class:i([{"uni-drawer--visible":_.showDrawer},"uni-drawer"]),onTouchmove:n(m.clear,["stop","prevent"])},{default:a((()=>[r(p,{class:i(["uni-drawer__mask",{"uni-drawer__mask--visible":_.showDrawer&&u.mask}]),onClick:w[0]||(w[0]=e=>m.close("mask"))},null,8,["class"]),r(p,{class:i(["uni-drawer__content",{"uni-drawer--right":_.rightMode,"uni-drawer--left":!_.rightMode,"uni-drawer__content--visible":_.showDrawer}]),style:o({width:_.drawerWidth+"px"})},{default:a((()=>[l(d.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"]),r(y,{onEsc:w[1]||(w[1]=e=>m.close("mask"))})])),_:3},8,["class","onTouchmove"])):c("",!0)}],["__scopeId","data-v-ac0dbaaa"]]);const R=D({data:()=>({showRight:!1,showLeft:!1}),methods:{confirm(){},showDrawer(e){this.$refs[e].open()},closeDrawer(e){this.$refs[e].close()},change(e,s){console.log(("showLeft"===s?"左窗口":"右窗口")+(e?"打开":"关闭")),this[s]=e}},onNavigationBarButtonTap(e){this.showLeft?this.$refs.showLeft.close():this.$refs.showLeft.open()},onBackPress(){if(this.showRight||this.showLeft)return this.$refs.showLeft.close(),this.$refs.showRight.close(),!0}},[["render",function(e,i,o,l,n,c){const D=m,R=b(d("uni-card"),k),T=p,C=h,x=b(d("uni-drawer"),L),$=b(d("uni-section"),v),S=y;return s(),t(C,null,{default:a((()=>[r(R,{"is-full":"","is-shadow":!1},{default:a((()=>[r(D,{class:"uni-h6"},{default:a((()=>[w("这是抽屉式导航组件使用示例，可以指定菜单左侧或者右侧弹出（仅初始化生效），组件内部可以放置任何内容。点击页面按钮即可显示导航菜单。")])),_:1})])),_:1}),r($,{title:"左侧滑出",type:"line"},{default:a((()=>[r(C,{class:"example-body"},{default:a((()=>[r(T,{type:"primary",onClick:i[0]||(i[0]=e=>c.showDrawer("showLeft"))},{default:a((()=>[r(D,{class:"word-btn-white"},{default:a((()=>[w("显示Drawer")])),_:1})])),_:1}),r(x,{ref:"showLeft",mode:"left",width:320,onChange:i[2]||(i[2]=e=>c.change(e,"showLeft"))},{default:a((()=>[r(C,{class:"close"},{default:a((()=>[r(T,{onClick:i[1]||(i[1]=e=>c.closeDrawer("showLeft"))},{default:a((()=>[r(D,{class:"word-btn-white"},{default:a((()=>[w("关闭Drawer")])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1})])),_:1}),r($,{title:"右侧滑出",type:"line"},{default:a((()=>[r(C,{class:"example-body"},{default:a((()=>[r(T,{type:"primary",onClick:i[3]||(i[3]=e=>c.showDrawer("showRight"))},{default:a((()=>[r(D,{class:"word-btn-white"},{default:a((()=>[w("显示Drawer")])),_:1})])),_:1}),r(x,{ref:"showRight",mode:"right","mask-click":!1,onChange:i[6]||(i[6]=e=>c.change(e,"showRight"))},{default:a((()=>[r(C,{class:"scroll-view"},{default:a((()=>[r(S,{class:"scroll-view-box","scroll-y":"true"},{default:a((()=>[r(C,{class:"info"},{default:a((()=>[r(D,{class:"info-text"},{default:a((()=>[w("右侧遮罩只能通过按钮关闭，不能通过点击遮罩关闭")])),_:1})])),_:1}),r(C,{class:"close"},{default:a((()=>[r(T,{onClick:i[4]||(i[4]=e=>c.closeDrawer("showRight"))},{default:a((()=>[r(D,{class:"word-btn-white"},{default:a((()=>[w("关闭Drawer")])),_:1})])),_:1})])),_:1}),(s(),u(_,null,f(100,(e=>r(C,{class:"info-content",key:e},{default:a((()=>[r(D,null,{default:a((()=>[w("可滚动内容 "+g(e),1)])),_:2},1024)])),_:2},1024))),64)),r(C,{class:"close"},{default:a((()=>[r(T,{onClick:i[5]||(i[5]=e=>c.closeDrawer("showRight"))},{default:a((()=>[r(D,{class:"word-btn-white"},{default:a((()=>[w("关闭Drawer")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-ec64c3c5"]]);export{R as default};
