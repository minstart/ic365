import{o as e,p as t,q as l,s as u,i,n as a,j as n,y as s,A as o,ac as d,m}from"./index-DQotwNSd.js";import{_ as r}from"./uni-card.DtmtsBix.js";import{r as p}from"./uni-app.es.Dfk47BXh.js";import{_ as c}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as h}from"./uni-section.DD6p8Tlx.js";const b=c({name:"UniNumberBox",emits:["change","input","update:modelValue","blur","focus"],props:{value:{type:[Number,String],default:1},modelValue:{type:[Number,String],default:1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},background:{type:String,default:"#f5f5f5"},color:{type:String,default:"#333"},disabled:{type:Boolean,default:!1},width:{type:Number,default:40}},data:()=>({inputValue:0}),watch:{value(e){this.inputValue=+e},modelValue(e){this.inputValue=+e}},computed:{widthWithPx(){return this.width+"px"}},created(){1===this.value&&(this.inputValue=+this.modelValue),1===this.modelValue&&(this.inputValue=+this.value)},methods:{_calcValue(e){if(this.disabled)return;const t=this._getDecimalScale();let l=this.inputValue*t,u=this.step*t;if("minus"===e){if(l-=u,l<this.min*t)return;l>this.max*t&&(l=this.max*t)}if("plus"===e){if(l+=u,l>this.max*t)return;l<this.min*t&&(l=this.min*t)}this.inputValue=(l/t).toFixed(String(t).length-1),this.$emit("input",+this.inputValue),this.$emit("update:modelValue",+this.inputValue),this.$emit("change",+this.inputValue)},_getDecimalScale(){let e=1;return~~this.step!==this.step&&(e=Math.pow(10,String(this.step).split(".")[1].length)),e},_onBlur(e){this.$emit("blur",e);let t=e.detail.value;if(isNaN(t))return void(this.inputValue=this.value);t=+t,t>this.max?t=this.max:t<this.min&&(t=this.min);const l=this._getDecimalScale();this.inputValue=t.toFixed(String(l).length-1),this.$emit("input",+this.inputValue),this.$emit("update:modelValue",+this.inputValue),this.$emit("change",+this.inputValue)},_onFocus(e){this.$emit("focus",e)}}},[["render",function(m,r,p,c,h,b){const f=s,g=o,V=d;return e(),t(g,{class:"uni-numbox"},{default:l((()=>[u(g,{onClick:r[0]||(r[0]=e=>b._calcValue("minus")),class:"uni-numbox__minus uni-numbox-btns",style:i({background:p.background})},{default:l((()=>[u(f,{class:a(["uni-numbox--text",{"uni-numbox--disabled":h.inputValue<=p.min||p.disabled}]),style:i({color:p.color})},{default:l((()=>[n("-")])),_:1},8,["class","style"])])),_:1},8,["style"]),u(V,{disabled:p.disabled,onFocus:b._onFocus,onBlur:b._onBlur,class:"uni-numbox__value",type:p.step<1?"digit":"number",modelValue:h.inputValue,"onUpdate:modelValue":r[1]||(r[1]=e=>h.inputValue=e),style:i({background:p.background,color:p.color,width:b.widthWithPx})},null,8,["disabled","onFocus","onBlur","type","modelValue","style"]),u(g,{onClick:r[2]||(r[2]=e=>b._calcValue("plus")),class:"uni-numbox__plus uni-numbox-btns",style:i({background:p.background})},{default:l((()=>[u(f,{class:a(["uni-numbox--text",{"uni-numbox--disabled":h.inputValue>=p.max||p.disabled}]),style:i({color:p.color})},{default:l((()=>[n("+")])),_:1},8,["class","style"])])),_:1},8,["style"])])),_:1})}],["__scopeId","data-v-91750ff9"]]);const f=c({components:{},data:()=>({numberValue:0,vModelValue:3}),methods:{change(e){this.numberValue=e},changeValue(e){console.log("返回数值：",e)},blur(e){console.log("-------blur:",e)},focus(e){console.log("-------focus:",e)}}},[["render",function(i,a,d,c,f,g){const V=s,_=p(m("uni-card"),r),x=p(m("uni-number-box"),b),y=p(m("uni-section"),h),v=o;return e(),t(v,{class:"container"},{default:l((()=>[u(_,{"is-shadow":!1,"is-full":""},{default:l((()=>[u(V,{class:"uni-h6"},{default:l((()=>[n("数字输入框组件多用于购物车加减商品等场景")])),_:1})])),_:1}),u(y,{title:"基本用法",type:"line",padding:""},{default:l((()=>[u(x,{onChange:g.changeValue},null,8,["onChange"])])),_:1}),u(y,{title:"使用v-model : "+f.vModelValue,subTitle:"使用 v-model 显示默认值",type:"line",padding:""},{default:l((()=>[u(x,{modelValue:f.vModelValue,"onUpdate:modelValue":a[0]||(a[0]=e=>f.vModelValue=e),onBlur:g.blur,onFocus:g.focus,onChange:g.changeValue},null,8,["modelValue","onBlur","onFocus","onChange"])])),_:1},8,["title"]),u(y,{title:"设置最小值和最大值",subTitle:"使用 min \\ max 属性设置最大最小值",type:"line",padding:""},{default:l((()=>[u(x,{min:2,max:9,value:555})])),_:1}),u(y,{title:"设置步长（步长0.1)",subTitle:"使用 step 属性设置步长",type:"line",padding:""},{default:l((()=>[u(x,{value:1.1,step:.1})])),_:1}),u(y,{title:"自定义背景",type:"line",subTitle:"使用 background 属性设置自定义背景色",padding:""},{default:l((()=>[u(x,{value:50,background:"#2979FF",color:"#fff"})])),_:1}),u(y,{title:"禁用状态",subTitle:"使用 disabled 属性设置组件禁用",type:"line",padding:""},{default:l((()=>[u(x,{disabled:!0})])),_:1}),u(y,{title:"获取输入的值 : "+f.numberValue,type:"line",padding:""},{default:l((()=>[u(x,{value:f.numberValue,onChange:g.change},null,8,["value","onChange"])])),_:1},8,["title"])])),_:1})}]]);export{f as default};
