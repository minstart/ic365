import{o as t,p as e,q as a,s,n as i,j as l,t as o,h as n,d as c,f as r,F as d,i as u,bn as h,y as p,x as m,A as g,G as f,P as b,Z as _,_ as w,a0 as x,$ as y}from"./index-DQotwNSd.js";import{_ as A}from"./_plugin-vue_export-helper.BCo6x5W8.js";const T={data0:{datetime:"40分钟前",article_type:0,title:"uni-app行业峰会频频亮相，开发者反响热烈!",source:"DCloud",comment_count:639},data1:{datetime:"一天前",article_type:1,title:"DCloud完成B2轮融资，uni-app震撼发布!",image_url:"https://web-assets.dcloud.net.cn/unidoc/zh/shuijiao-small.jpg",source:"DCloud",comment_count:11395},data2:{datetime:"一天前",article_type:2,title:"中国技术界小奇迹：HBuilder开发者突破200万",image_url:"https://web-assets.dcloud.net.cn/unidoc/zh/muwu-samll.jpg",source:"DCloud",comment_count:11395},data3:{article_type:3,image_list:[{url:"https://web-assets.dcloud.net.cn/unidoc/zh/cbd%20-small.jpg",width:563,height:316},{url:"https://web-ext-storage.dcloud.net.cn/hello-uni-app/template-tabbar-2.jpg",width:641,height:360},{url:"https://web-assets.dcloud.net.cn/unidoc/zh/shuijiao-small.jpg",width:640,height:360}],datetime:"5分钟前",title:"uni-app 支持使用 npm 安装第三方包，生态更趋丰富",source:"DCloud",comment_count:11},data4:{datetime:"2小时前",article_type:4,title:"uni-app 支持原生小程序自定义组件，更开放、更自由",image_url:"https://web-ext-storage.dcloud.net.cn/hello-uni-app/template-tabbar-1.jpg",source:"DCloud",comment_count:69}};const v=A({components:{mediaItem:A({props:{options:{type:Object,default:function(t){return{}}}},methods:{click(){this.$emit("click")},close(t){this.$emit("close")}}},[["render",function(f,b,_,w,x,y){const A=p,T=m,v=g;return _.options.title?(t(),e(v,{key:0,class:"media-item view","hover-class":"media-item-hover",onClick:y.click},{default:a((()=>[s(v,{class:"view",style:u({flexDirection:1===_.options.article_type||2===_.options.article_type?2===_.options.article_type?"row":"row-reverse":"column"})},{default:a((()=>[s(A,{class:i(["media-title",{"media-title2":1===_.options.article_type||2===_.options.article_type}])},{default:a((()=>[l(o(_.options.title),1)])),_:1},8,["class"]),_.options.image_list||_.options.image_url?(t(),e(v,{key:0,class:i(["image-section flex-row",{"image-section-right":2===_.options.article_type,"image-section-left":1===_.options.article_type}]),style:{flexDirection:"row"}},{default:a((()=>[_.options.image_url?(t(),e(T,{key:0,class:i(["image-list1",{"image-list2":1===_.options.article_type||2===_.options.article_type}]),src:_.options.image_url},null,8,["class","src"])):n("",!0),_.options.image_list?(t(!0),c(d,{key:1},r(_.options.image_list,((a,s)=>(t(),e(T,{class:"image-list3",src:a.url,key:s},null,8,["src"])))),128)):n("",!0)])),_:1},8,["class"])):n("",!0)])),_:1},8,["style"]),s(v,{class:"media-foot flex-row",style:{"flex-direction":"row"}},{default:a((()=>[s(v,{class:"media-info flex-row",style:{"flex-direction":"row"}},{default:a((()=>[s(A,{class:"info-text"},{default:a((()=>[l(o(_.options.source),1)])),_:1}),s(A,{class:"info-text"},{default:a((()=>[l(o(_.options.comment_count)+"条评论",1)])),_:1}),s(A,{class:"info-text"},{default:a((()=>[l(o(_.options.datetime),1)])),_:1})])),_:1}),s(v,{class:"max-close-view",onClick:h(y.close,["stop"])},{default:a((()=>[s(v,{class:"close-l close-h"}),s(v,{class:"close-l close-v"})])),_:1},8,["onClick"])])),_:1}),s(v,{class:"media-item-line",style:{position:"absolute"}})])),_:1},8,["onClick"])):n("",!0)}],["__scopeId","data-v-3352646b"]])},data:()=>({newsList:[],cacheTab:[],tabIndex:0,tabBars:[{name:"关注",id:"guanzhu"},{name:"推荐",id:"tuijian"},{name:"体育",id:"tiyu"},{name:"热点",id:"redian"},{name:"财经",id:"caijing"},{name:"娱乐",id:"yule"},{name:"军事",id:"junshi"},{name:"历史",id:"lishi"},{name:"本地",id:"bendi"}],scrollInto:"",showTips:!1,navigateFlag:!1,pulling:!1,refreshIcon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAB5QTFRFcHBw3Nzct7e39vb2ycnJioqK7e3tpqam29vb////D8oK7wAAAAp0Uk5T////////////ALLMLM8AAABxSURBVHja7JVBDoAgDASrjqj//7CJBi90iyYeOHTPMwmFZrHjYyyFYYUy1bwUZqtJIYVxhf1a6u0R7iUvWsCcrEtwJHp8MwMdvh2amHduiZD3rpWId9+BgPd7Cc2LIkPyqvlQvKxKBJ//Qwq/CacAAwDUv0a0YuKhzgAAAABJRU5ErkJggg=="}),onLoad(){setTimeout((()=>{this.tabBars.forEach((t=>{this.newsList.push({data:[],isLoading:!1,refreshText:"",loadingText:"加载更多..."})})),this.getList(0)}),350)},methods:{getList(t){let e=this.newsList[t],a=[];for(let s=1;s<=10;s++){let t=Object.assign({},T["data"+Math.floor(5*Math.random())]);t.id=this.newGuid(),a.push(t)}e.data=e.data.concat(a)},goDetail(t){this.navigateFlag||(this.navigateFlag=!0,f({url:"./detail/detail?title="+t.title}),setTimeout((()=>{this.navigateFlag=!1}),200))},close(t,e){b({content:"是否删除本条信息？",success:a=>{a.confirm&&this.newsList[t].data.splice(e,1)}})},loadMore(t){setTimeout((()=>{this.getList(this.tabIndex)}),500)},ontabtap(t){let e=t.target.dataset.current||t.currentTarget.dataset.current;this.switchTab(e)},ontabchange(t){let e=t.target.current||t.detail.current;this.switchTab(e)},switchTab(t){if(0===this.newsList[t].data.length&&this.getList(t),this.tabIndex!==t){if(this.newsList[this.tabIndex].data.length>100){this.cacheTab.indexOf(this.tabIndex)<0&&this.cacheTab.push(this.tabIndex)}if(this.tabIndex=t,this.scrollInto=this.tabBars[t].id,this.cacheTab.length>3){let t=this.cacheTab[0];this.clearTabData(t),this.cacheTab.splice(0,1)}}},clearTabData(t){this.newsList[t].data.length=0,this.newsList[t].loadingText="加载更多..."},refreshData(){},onrefresh(t){var e=this.newsList[this.tabIndex];e.refreshFlag&&(e.refreshing=!0,e.refreshText="正在刷新...",setTimeout((()=>{this.refreshData(),this.pulling=!0,e.refreshing=!1,e.refreshFlag=!1,e.refreshText="已刷新",setTimeout((()=>{this.pulling=!1}),500)}),2e3))},onpullingdown(t){var e=this.newsList[this.tabIndex];e.refreshing||this.pulling||(Math.abs(t.pullingDistance)>Math.abs(t.viewHeight)?(e.refreshFlag=!0,e.refreshText="释放立即刷新"):(e.refreshFlag=!1,e.refreshText="下拉可以刷新"))},newGuid(){let t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return(t()+t()+"-"+t()+"-4"+t().substr(0,3)+"-"+t()+"-"+t()+t()+t()).toUpperCase()}}},[["render",function(u,h,m,f,b,A){const T=p,v=g,k=w,C=_("media-item"),L=y,B=x;return t(),e(v,{class:"tabs"},{default:a((()=>[s(k,{id:"tab-bar",class:"scroll-h","scroll-x":!0,"show-scrollbar":!1,"scroll-into-view":b.scrollInto},{default:a((()=>[(t(!0),c(d,null,r(b.tabBars,((n,c)=>(t(),e(v,{key:n.id,class:"uni-tab-item",id:n.id,"data-current":c,onClick:A.ontabtap},{default:a((()=>[s(T,{class:i(["uni-tab-item-title",b.tabIndex==c?"uni-tab-item-title-active":""])},{default:a((()=>[l(o(n.name),1)])),_:2},1032,["class"])])),_:2},1032,["id","data-current","onClick"])))),128))])),_:1},8,["scroll-into-view"]),s(v,{class:"line-h"}),s(B,{current:b.tabIndex,class:"swiper-box",style:{flex:"1"},duration:300,onChange:A.ontabchange},{default:a((()=>[(t(!0),c(d,null,r(b.newsList,((i,u)=>(t(),e(L,{class:"swiper-item",key:u},{default:a((()=>[s(k,{class:"scroll-v list",enableBackToTop:"true","scroll-y":"",onScrolltolower:t=>A.loadMore(u)},{default:a((()=>[(t(!0),c(d,null,r(i.data,((i,l)=>(t(),e(v,{key:i.id},{default:a((()=>[s(C,{options:i,onClose:t=>A.close(u,l),onClick:t=>A.goDetail(i)},null,8,["options","onClose","onClick"])])),_:2},1024)))),128)),i.isLoading||i.data.length>4?(t(),e(v,{key:0,class:"loading-more"},{default:a((()=>[s(T,{class:"loading-more-text"},{default:a((()=>[l(o(i.loadingText),1)])),_:2},1024)])),_:2},1024)):n("",!0)])),_:2},1032,["onScrolltolower"])])),_:2},1024)))),128))])),_:1},8,["current","onChange"])])),_:1})}],["__scopeId","data-v-3fe16bfe"]]);export{v as default};
