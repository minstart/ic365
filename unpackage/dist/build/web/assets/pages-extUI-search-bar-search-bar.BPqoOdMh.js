import{bm as e,ag as a,m as l,o as n,p as c,q as o,s as t,i as r,al as s,j as i,t as u,h,A as d,ac as m,y as f,I as p}from"./index-DQotwNSd.js";import{_ as y}from"./uni-card.DtmtsBix.js";import{r as b}from"./uni-app.es.Dfk47BXh.js";import{_ as C}from"./uni-icons.DpKtHwQd.js";import{_}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as x}from"./uni-section.DD6p8Tlx.js";const V={en:{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"Search enter content"},"zh-Hans":{"uni-search-bar.cancel":"取消","uni-search-bar.placeholder":"请输入搜索内容"},"zh-Hant":{"uni-search-bar.cancel":"取消","uni-search-bar.placeholder":"請輸入搜索內容"}},{t:g}=e(V);const B=_({name:"UniSearchBar",emits:["input","update:modelValue","clear","cancel","confirm","blur","focus"],props:{placeholder:{type:String,default:""},radius:{type:[Number,String],default:5},clearButton:{type:String,default:"auto"},cancelButton:{type:String,default:"auto"},cancelText:{type:String,default:""},bgColor:{type:String,default:"#F8F8F8"},textColor:{type:String,default:"#000000"},maxlength:{type:[Number,String],default:100},value:{type:[Number,String],default:""},modelValue:{type:[Number,String],default:""},focus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},data:()=>({show:!1,showSync:!1,searchVal:""}),computed:{cancelTextI18n(){return this.cancelText||g("uni-search-bar.cancel")},placeholderText(){return this.placeholder||g("uni-search-bar.placeholder")}},watch:{modelValue:{immediate:!0,handler(e){this.searchVal=e,e&&(this.show=!0)}},focus:{immediate:!0,handler(e){if(e){if(this.readonly)return;this.show=!0,this.$nextTick((()=>{this.showSync=!0}))}}},searchVal(e,a){this.$emit("input",e),this.$emit("update:modelValue",e)}},methods:{searchClick(){this.readonly||this.show||(this.show=!0,this.$nextTick((()=>{this.showSync=!0})))},clear(){this.searchVal="",this.$nextTick((()=>{this.$emit("clear",{value:""})}))},cancel(){this.readonly||(this.$emit("cancel",{value:this.searchVal}),this.searchVal="",this.show=!1,this.showSync=!1,a())},confirm(){a(),this.$emit("confirm",{value:this.searchVal})},blur(){a(),this.$emit("blur",{value:this.searchVal})},emitFocus(e){this.$emit("focus",e.detail)}}},[["render",function(e,a,p,y,_,x){const V=b(l("uni-icons"),C),g=d,B=m,w=f;return n(),c(g,{class:"uni-searchbar"},{default:o((()=>[t(g,{style:r({borderRadius:p.radius+"px",backgroundColor:p.bgColor}),class:"uni-searchbar__box",onClick:x.searchClick},{default:o((()=>[t(g,{class:"uni-searchbar__box-icon-search"},{default:o((()=>[s(e.$slots,"searchIcon",{},(()=>[t(V,{color:"#c0c4cc",size:"18",type:"search"})]),!0)])),_:3}),_.show||_.searchVal?(n(),c(B,{key:0,focus:_.showSync,disabled:p.readonly,placeholder:x.placeholderText,maxlength:p.maxlength,class:"uni-searchbar__box-search-input","confirm-type":"search",type:"text",modelValue:_.searchVal,"onUpdate:modelValue":a[0]||(a[0]=e=>_.searchVal=e),style:r({color:p.textColor}),onConfirm:x.confirm,onBlur:x.blur,onFocus:x.emitFocus},null,8,["focus","disabled","placeholder","maxlength","modelValue","style","onConfirm","onBlur","onFocus"])):(n(),c(w,{key:1,class:"uni-searchbar__text-placeholder"},{default:o((()=>[i(u(p.placeholder),1)])),_:1})),_.show&&("always"===p.clearButton||"auto"===p.clearButton&&""!==_.searchVal)&&!p.readonly?(n(),c(g,{key:2,class:"uni-searchbar__box-icon-clear",onClick:x.clear},{default:o((()=>[s(e.$slots,"clearIcon",{},(()=>[t(V,{color:"#c0c4cc",size:"20",type:"clear"})]),!0)])),_:3},8,["onClick"])):h("",!0)])),_:3},8,["style","onClick"]),"always"===p.cancelButton||_.show&&"auto"===p.cancelButton?(n(),c(w,{key:0,onClick:x.cancel,class:"uni-searchbar__cancel"},{default:o((()=>[i(u(x.cancelTextI18n),1)])),_:1},8,["onClick"])):h("",!0)])),_:3})}],["__scopeId","data-v-314f636a"]]);const w=_({data:()=>({searchValue:"123123"}),methods:{search(e){p({title:"搜索："+e.value,icon:"none"})},input(e){console.log("----input:",e)},clear(e){p({title:"clear事件，清除值为："+e.value,icon:"none"})},blur(e){p({title:"blur事件，输入值为："+e.value,icon:"none"})},focus(e){p({title:"focus事件，输出值为："+e.value,icon:"none"})},cancel(e){p({title:"点击取消，输入值为："+e.value,icon:"none"})}},onBackPress(){}},[["render",function(e,a,r,s,h,m){const p=f,_=b(l("uni-card"),y),V=b(l("uni-search-bar"),B),g=d,w=b(l("uni-section"),x),k=b(l("uni-icons"),C);return n(),c(g,null,{default:o((()=>[t(_,{"is-shadow":!1,"is-full":""},{default:o((()=>[t(p,{class:"uni-h6"},{default:o((()=>[i("搜索栏组件，通常用于搜索商品、文章等。")])),_:1})])),_:1}),t(w,{title:"基本用法",type:"line"},{default:o((()=>[t(V,{onConfirm:m.search,focus:!0,modelValue:h.searchValue,"onUpdate:modelValue":a[0]||(a[0]=e=>h.searchValue=e),onBlur:m.blur,onFocus:m.focus,onInput:m.input,onCancel:m.cancel,onClear:m.clear},null,8,["onConfirm","modelValue","onBlur","onFocus","onInput","onCancel","onClear"]),t(g,{class:"search-result"},{default:o((()=>[t(p,{class:"search-result-text"},{default:o((()=>[i("当前输入为："+u(h.searchValue),1)])),_:1})])),_:1})])),_:1}),t(w,{title:"自定义样式",subTitle:"使用 bgColor 属性自定义背景色",type:"line"},{default:o((()=>[t(V,{placeholder:"自定义背景色",bgColor:"#EEEEEE",onConfirm:m.search},null,8,["onConfirm"])])),_:1}),t(w,{title:"只读样式",subTitle:"使用 readonly 使搜索框只读",type:"line"},{default:o((()=>[t(V,{readonly:"",placeholder:"自定义背景色",onConfirm:m.search},null,8,["onConfirm"])])),_:1}),t(w,{title:"自定义icon",type:"line"},{default:o((()=>[t(V,{placeholder:"自定义searchIcon",onConfirm:m.search,onCancel:m.cancel,"cancel-text":"cancel"},{default:o((()=>[t(k,{slot:"searchIcon",color:"#999999",size:"18",type:"home"})])),_:1},8,["onConfirm","onCancel"])])),_:1}),t(w,{title:"控制清除/取消按钮",subTitle:"使用 clearButton 属性设置清除按钮",type:"line"},{default:o((()=>[t(V,{radius:"5",placeholder:"一直显示",clearButton:"always",cancelButton:"always",onConfirm:m.search,onCancel:m.cancel},null,8,["onConfirm","onCancel"]),t(V,{class:"uni-mt-10",radius:"5",placeholder:"自动显示隐藏",clearButton:"auto",cancelButton:"none",onConfirm:m.search},null,8,["onConfirm"]),t(V,{class:"uni-mt-10",radius:"100",placeholder:"一直不显示",clearButton:"none",cancelButton:"none",onConfirm:m.search},null,8,["onConfirm"])])),_:1})])),_:1})}],["__scopeId","data-v-0ec47896"]]);export{w as default};
