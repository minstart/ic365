import{o as t,p as e,q as o,s as n,al as s,d as i,F as a,f as l,i as c,bn as r,j as h,t as d,y as u,A as p,aF as f,I as g,P as m,m as w}from"./index-DQotwNSd.js";import{_ as b}from"./uni-card.DtmtsBix.js";import{r as C}from"./uni-app.es.Dfk47BXh.js";import{_ as x}from"./uni-section.DD6p8Tlx.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";let _={},y=null;y=function(){var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],o=!0;for(let n=0;n<e.length-1;n++)if(t.indexOf(e[n])>0){o=!1;break}return o}(),_={data:()=>({is_show:"none"}),watch:{show(t){this.is_show=this.show}},created(){this.swipeaction=this.getSwipeAction(),this.swipeaction&&Array.isArray(this.swipeaction.children)&&this.swipeaction.children.push(this)},mounted(){this.is_show=this.show},methods:{closeSwipe(t){this.autoClose&&this.swipeaction&&this.swipeaction.closeOther(this)},change(t){this.$emit("change",t.open),this.is_show!==t.open&&(this.is_show=t.open)},appTouchStart(t){if(y)return;const{clientX:e}=t.changedTouches[0];this.clientX=e,this.timestamp=(new Date).getTime()},appTouchEnd(t,e,o,n){if(y)return;const{clientX:s}=t.changedTouches[0];let i=Math.abs(this.clientX-s),a=(new Date).getTime()-this.timestamp;i<40&&a<300&&this.$emit("click",{content:o,index:e,position:n})},onClickForPC(t,e,o){y&&this.$emit("click",{content:e,index:t,position:o})}}};const v=_;var S=10,T=!1;function X(t,e){var o=t.instance,n=o.getDataset().disabled,s=o.getState();O(o,e),(n=("string"==typeof n?JSON.parse(n):n)||!1)||(o.requestAnimationFrame((function(){o.removeClass("ani"),e.callMethod("closeSwipe")})),s.x=s.left||0,function(t){var e=t.instance,o=e.getState();A(e);var n=t.touches[0];T&&Y()&&(n=t);o.startX=n.clientX,o.startY=n.clientY}(t))}function $(t,e){var o=t.instance,n=o.getDataset().disabled,s=o.getState();(n=("string"==typeof n?JSON.parse(n):n)||!1)||(!function(t){var e=t.instance,o=e.getState(),n=t.touches[0];T&&Y()&&(n=t);o.deltaX=n.clientX-o.startX,o.deltaY=n.clientY-o.startY,o.offsetY=Math.abs(o.deltaY),o.offsetX=Math.abs(o.deltaX),o.direction=o.direction||function(t,e){if(t>e&&t>S)return"horizontal";if(e>t&&e>S)return"vertical";return""}(o.offsetX,o.offsetY)}(t),"horizontal"===s.direction&&(t.preventDefault&&t.preventDefault(),W(s.x+s.deltaX,o)))}function D(t,e){var o=t.instance,n=o.getDataset().disabled,s=o.getState();(n=("string"==typeof n?JSON.parse(n):n)||!1)||function(t,e,o){var n=e.getState(),s=n.threshold;n.position;var i=n.isopen||"none",a=n.leftWidth,l=n.rightWidth;if(0===n.deltaX)return void F("none",e,o);F("none"===i&&l>0&&-t>s||"none"!==i&&l>0&&l+t<s?"right":"none"===i&&a>0&&t>s||"none"!==i&&a>0&&a-t<s?"left":"none",e,o)}(s.left,o,e)}function W(t,e,o){t=t||0;var n,s,i,a=e.getState(),l=a.leftWidth,c=a.rightWidth;a.left=(n=t,s=-c,i=l,Math.min(Math.max(n,s),i)),e.requestAnimationFrame((function(){e.setStyle({transform:"translateX("+a.left+"px)","-webkit-transform":"translateX("+a.left+"px)"})}))}function O(t,e){var o=t.getState(),n=e.selectComponent(".button-group--left"),s=e.selectComponent(".button-group--right"),i={width:0},a={width:0};n&&(i=n.getBoundingClientRect()),s&&(a=s.getBoundingClientRect()),o.leftWidth=i.width||0,o.rightWidth=a.width||0,o.threshold=t.getDataset().threshold}function F(t,e,o){var n=e.getState(),s=n.leftWidth,i=n.rightWidth,a="";switch(n.isopen=n.isopen?n.isopen:"none",t){case"left":a=s;break;case"right":a=-i;break;default:a=0}n.isopen!==t&&(n.throttle=!0,o.callMethod("change",{open:t})),n.isopen=t,e.requestAnimationFrame((function(){e.addClass("ani"),W(a,e)}))}function A(t){var e=t.getState();e.direction="",e.deltaX=0,e.deltaY=0,e.offsetX=0,e.offsetY=0}function Y(){for(var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],o=!0,n=0;n<e.length-1;n++)if(t.indexOf(e[n])>0){o=!1;break}return o}"object"==typeof window&&(T=!0);var M=!1;const P={showWatch:function(t,e,o,n){var s=n.getState();O(n,o),t&&"none"!==t?F(t,n,o):(s.left&&F("none",n,o),A(n))},touchstart:X,touchmove:$,touchend:D,mousedown:function(t,e){T&&Y()&&(X(t,e),M=!0)},mousemove:function(t,e){T&&Y()&&M&&$(t)},mouseup:function(t,e){T&&Y()&&(D(t,e),M=!1)},mouseleave:function(t,e){T&&Y()&&(M=!1)}},z=t=>{t.$wxs||(t.$wxs=[]),t.$wxs.push("wxsswipe"),t.mixins||(t.mixins=[]),t.mixins.push({beforeCreate(){this.wxsswipe=P}})},j={showWatch(t,e,o,n,s){var i=s.state||{};(o.$el||o.$vm&&o.$vm.$el)&&(this.getDom(n,o,s),t&&"none"!==t?this.openState(t,n,o,s):(i.left&&this.openState("none",n,o,s),this.resetTouchStatus(n,s)))},touchstart(t,e,o){let n=t.instance,s=n.getDataset().disabled,i=o.state||{};this.getDom(n,e,o),s=this.getDisabledType(s),s||(n.requestAnimationFrame((function(){n.removeClass("ani"),e.callMethod("closeSwipe")})),i.x=i.left||0,this.stopTouchStart(t,e,o))},touchmove(t,e,o){let n=t.instance;if(!n)return;let s=n.getDataset().disabled,i=o.state||{};if(s=this.getDisabledType(s),s)return;if(this.stopTouchMove(t,o),"horizontal"!==i.direction)return;t.preventDefault&&t.preventDefault();let a=i.x+i.deltaX;this.move(a,n,e,o)},touchend(t,e,o){let n=t.instance,s=n.getDataset().disabled,i=o.state||{};s=this.getDisabledType(s),s||this.moveDirection(i.left,n,e,o)},move(t,e,o,n){t=t||0;let s=n.state||{},i=s.leftWidth,a=s.rightWidth;s.left=this.range(t,-a,i),e.requestAnimationFrame((function(){e.setStyle({transform:"translateX("+s.left+"px)","-webkit-transform":"translateX("+s.left+"px)"})}))},getDom(t,e,o){var n=o.state||{},s=e.$el||e.$vm&&e.$vm.$el,i=s.querySelector(".button-group--left"),a=s.querySelector(".button-group--right");i&&i.offsetWidth?n.leftWidth=i.offsetWidth||0:n.leftWidth=0,a&&a.offsetWidth?n.rightWidth=a.offsetWidth||0:n.rightWidth=0,n.threshold=t.getDataset().threshold},getDisabledType:t=>("string"==typeof t?JSON.parse(t):t)||!1,range:(t,e,o)=>Math.min(Math.max(t,e),o),moveDirection(t,e,o,n){var s=n.state||{},i=s.threshold;s.position;var a=s.isopen||"none",l=s.leftWidth,c=s.rightWidth;0!==s.deltaX?"none"===a&&c>0&&-t>i||"none"!==a&&c>0&&c+t<i?this.openState("right",e,o,n):"none"===a&&l>0&&t>i||"none"!==a&&l>0&&l-t<i?this.openState("left",e,o,n):this.openState("none",e,o,n):this.openState("none",e,o,n)},openState(t,e,o,n){let s=n.state||{},i=s.leftWidth,a=s.rightWidth,l="";switch(s.isopen=s.isopen?s.isopen:"none",t){case"left":l=i;break;case"right":l=-a;break;default:l=0}s.isopen!==t&&(s.throttle=!0,o.callMethod("change",{open:t})),s.isopen=t,e.requestAnimationFrame((()=>{e.addClass("ani"),this.move(l,e,o,n)}))},getDirection:(t,e)=>t>e&&t>10?"horizontal":e>t&&e>10?"vertical":"",resetTouchStatus(t,e){let o=e.state||{};o.direction="",o.deltaX=0,o.deltaY=0,o.offsetX=0,o.offsetY=0},stopTouchStart(t,e,o){let n=t.instance,s=o.state||{};this.resetTouchStatus(n,o);var i=t.touches[0];s.startX=i.clientX,s.startY=i.clientY},stopTouchMove(t,e){t.instance;let o=e.state||{},n=t.touches[0];o.deltaX=n.clientX-o.startX,o.deltaY=n.clientY-o.startY,o.offsetY=Math.abs(o.deltaY),o.offsetX=Math.abs(o.deltaX),o.direction=o.direction||this.getDirection(o.offsetX,o.offsetY)}},q={mounted(t,e,o){this.state={}},methods:{showWatch(t,e,o,n){j.showWatch(t,e,o,n,this)},touchstart(t,e){j.touchstart(t,e,this)},touchmove(t,e){j.touchmove(t,e,this)},touchend(t,e){j.touchend(t,e,this)}}},I=t=>{t.$renderjs||(t.$renderjs=[]),t.$renderjs.push("renderswipe"),t.mixins||(t.mixins=[]),t.mixins.push({beforeCreate(){this.renderswipe=this},mounted(){this.$ownerInstance=this.$gcd(this,!0)}}),t.mixins.push(q)},L={mixins:[v,{},{}],emits:["click","change"],props:{show:{type:String,default:"none"},disabled:{type:Boolean,default:!1},autoClose:{type:Boolean,default:!0},threshold:{type:Number,default:20},leftOptions:{type:Array,default:()=>[]},rightOptions:{type:Array,default:()=>[]}},unmounted(){this.__isUnmounted=!0,this.uninstall()},methods:{uninstall(){this.swipeaction&&this.swipeaction.children.forEach(((t,e)=>{t===this&&this.swipeaction.children.splice(e,1)}))},getSwipeAction(t="uniSwipeAction"){let e=this.$parent,o=e.$options.name;for(;o!==t;){if(e=e.$parent,!e)return!1;o=e.$options.name}return e}}};z(L),I(L);const E=k(L,[["render",function(f,g,m,w,b,C){const x=u,k=p;return t(),e(k,{class:"uni-swipe"},{default:o((()=>[n(k,{class:"uni-swipe_box","change:prop":f.wxsswipe.showWatch,prop:f.is_show,"data-threshold":m.threshold,"data-disabled":m.disabled,onTouchstart:f.wxsswipe.touchstart,onTouchmove:f.wxsswipe.touchmove,onTouchend:f.wxsswipe.touchend},{default:o((()=>[n(k,{class:"uni-swipe_button-group button-group--left"},{default:o((()=>[s(f.$slots,"left",{},(()=>[(t(!0),i(a,null,l(m.leftOptions,((s,i)=>(t(),e(k,{key:i,style:c({backgroundColor:s.style&&s.style.backgroundColor?s.style.backgroundColor:"#C7C6CD"}),class:"uni-swipe_button button-hock",onTouchstart:r(f.appTouchStart,["stop"]),onTouchend:r((t=>f.appTouchEnd(t,i,s,"left")),["stop"]),onClick:r((t=>f.onClickForPC(i,s,"left")),["stop"])},{default:o((()=>[n(x,{class:"uni-swipe_button-text",style:c({color:s.style&&s.style.color?s.style.color:"#FFFFFF",fontSize:s.style&&s.style.fontSize?s.style.fontSize:"16px"})},{default:o((()=>[h(d(s.text),1)])),_:2},1032,["style"])])),_:2},1032,["style","onTouchstart","onTouchend","onClick"])))),128))]),!0)])),_:3}),n(k,{class:"uni-swipe_text--center"},{default:o((()=>[s(f.$slots,"default",{},void 0,!0)])),_:3}),n(k,{class:"uni-swipe_button-group button-group--right"},{default:o((()=>[s(f.$slots,"right",{},(()=>[(t(!0),i(a,null,l(m.rightOptions,((s,i)=>(t(),e(k,{key:i,style:c({backgroundColor:s.style&&s.style.backgroundColor?s.style.backgroundColor:"#C7C6CD"}),class:"uni-swipe_button button-hock",onTouchstart:r(f.appTouchStart,["stop"]),onTouchend:r((t=>f.appTouchEnd(t,i,s,"right")),["stop"]),onClick:r((t=>f.onClickForPC(i,s,"right")),["stop"])},{default:o((()=>[n(x,{class:"uni-swipe_button-text",style:c({color:s.style&&s.style.color?s.style.color:"#FFFFFF",fontSize:s.style&&s.style.fontSize?s.style.fontSize:"16px"})},{default:o((()=>[h(d(s.text),1)])),_:2},1032,["style"])])),_:2},1032,["style","onTouchstart","onTouchend","onClick"])))),128))]),!0)])),_:3})])),_:3},8,["change:prop","prop","data-threshold","data-disabled","onTouchstart","onTouchmove","onTouchend"])])),_:3})}],["__scopeId","data-v-b44c494b"]]);const N=k({name:"uniSwipeAction",data:()=>({}),created(){this.children=[]},methods:{resize(){},closeAll(){this.children.forEach((t=>{t.is_show="none"}))},closeOther(t){this.openItem&&this.openItem!==t&&(this.openItem.is_show="none"),this.openItem=t}}},[["render",function(n,i,a,l,c,r){const h=p;return t(),e(h,null,{default:o((()=>[s(n.$slots,"default")])),_:3})}]]);const B=k({components:{},data:()=>({show:!1,isOpened:"none",options1:[{text:"取消置顶"}],options2:[{text:"取消",style:{backgroundColor:"#007aff"}},{text:"确认",style:{backgroundColor:"#F56C6C"}}],swipeList:[{options:[{text:"添加",style:{backgroundColor:"#F56C6C"}}],id:0,content:"左滑点击添加新增一条数据"},{id:1,options:[{text:"置顶"},{text:"删除",style:{backgroundColor:"rgb(255,58,49)"}}],content:"item2"},{id:2,options:[{text:"置顶"},{text:"标记为已读",style:{backgroundColor:"rgb(254,156,1)"}},{text:"删除",style:{backgroundColor:"rgb(255,58,49)"}}],content:"item3"}]}),onReady(){setTimeout((()=>{this.isOpened="right"}),1e3),f("update",(t=>{console.log(111),this.swipeClick({content:{text:"添加"}})}))},methods:{contentClick(){console.log("点击内容"),g({title:"点击内容",icon:"none"})},bindClick(t){console.log(t),g({title:`点击了${"left"===t.position?"左侧":"右侧"} ${t.content.text}按钮`,icon:"none"})},setOpened(){"none"!==this.isOpened?"left"!==this.isOpened?"right"!==this.isOpened||(this.isOpened="none"):this.isOpened="right":this.isOpened="left"},change(t){this.isOpened=t,console.log("返回：",t)},swipeChange(t,e){console.log("返回：",t),console.log("当前索引：",e)},swipeClick(t,e){let{content:o}=t;"删除"===o.text?m({title:"提示",content:"是否删除",success:t=>{t.confirm?this.swipeList.splice(e,1):t.cancel&&console.log("用户点击取消")}}):"添加"===o.text?this.swipeList.length<10?(this.swipeList.push({id:(new Date).getTime(),options:[{text:"置顶"},{text:"标记为已读",style:{backgroundColor:"rgb(254,156,1)"}},{text:"删除",style:{backgroundColor:"rgb(255,58,49)"}}],content:"新增"+(new Date).getTime()}),g({title:"添加了一条数据",icon:"none"})):g({title:"最多添加十条数据",icon:"none"}):g({title:`点击了${t.content.text}按钮`,icon:"none"})}}},[["render",function(s,c,r,f,g,m){const k=u,_=C(w("uni-card"),b),y=C(w("uni-section"),x),v=p,S=C(w("uni-swipe-action-item"),E),T=C(w("uni-swipe-action"),N);return t(),e(v,{class:"container"},{default:o((()=>[n(_,{"is-full":"","is-shadow":!1},{default:o((()=>[n(k,{class:"uni-h6"},{default:o((()=>[h("通过滑动触发选项的容器，容器内可放置列表等组件，通过左右滑动来触发一些操作。")])),_:1})])),_:1}),n(y,{title:"基本用法",type:"line"}),n(T,null,{default:o((()=>[n(S,{"left-options":g.options2,threshold:0,"right-options":g.options1,onClick:m.bindClick},{default:o((()=>[n(v,{class:"content-box",onClick:m.contentClick},{default:o((()=>[n(k,{class:"content-text"},{default:o((()=>[h("使用数据填充")])),_:1})])),_:1},8,["onClick"])])),_:1},8,["left-options","right-options","onClick"]),n(S,{onClick:m.bindClick},{left:o((()=>[n(v,{class:"slot-button"},{default:o((()=>[n(k,{class:"slot-button-text",onClick:c[0]||(c[0]=t=>m.bindClick({position:"left",content:{text:"置顶"}}))},{default:o((()=>[h("置顶")])),_:1})])),_:1})])),right:o((()=>[n(v,{class:"slot-button",onClick:c[1]||(c[1]=t=>m.bindClick({position:"right",content:{text:"删除"}}))},{default:o((()=>[n(k,{class:"slot-button-text"},{default:o((()=>[h("删除")])),_:1})])),_:1})])),default:o((()=>[n(v,{class:"content-box",onClick:m.contentClick},{default:o((()=>[n(k,{class:"content-text"},{default:o((()=>[h("使用左右插槽")])),_:1})])),_:1},8,["onClick"])])),_:1},8,["onClick"]),n(S,{"right-options":g.options1,onClick:m.bindClick},{left:o((()=>[n(v,{class:"slot-button"},{default:o((()=>[n(k,{class:"slot-button-text",onClick:c[2]||(c[2]=t=>m.bindClick({position:"left",content:{text:"置顶"}}))},{default:o((()=>[h("置顶")])),_:1})])),_:1})])),default:o((()=>[n(v,{class:"content-box",onClick:m.contentClick},{default:o((()=>[n(k,{class:"content-text"},{default:o((()=>[h("数据与插槽混合使用")])),_:1})])),_:1},8,["onClick"])])),_:1},8,["right-options","onClick"])])),_:1}),n(y,{title:"禁止滑动",type:"line"}),n(T,null,{default:o((()=>[n(S,{disabled:!0},{default:o((()=>[n(v,{class:"content-box"},{default:o((()=>[n(k,{class:"content-text"},{default:o((()=>[h("禁止左右滚动")])),_:1})])),_:1})])),_:1})])),_:1}),n(y,{title:"使用变量控制开关",type:"line"}),n(v,{class:"example-body"},{default:o((()=>[n(v,{class:"button",onClick:m.setOpened},{default:o((()=>[n(k,{class:"button-text"},{default:o((()=>[h("当前状态："+d(g.isOpened),1)])),_:1})])),_:1},8,["onClick"])])),_:1}),n(T,null,{default:o((()=>[n(S,{"left-options":g.options2,"right-options":g.options2,show:g.isOpened,"auto-close":!1,onChange:m.change,onClick:m.bindClick},{default:o((()=>[n(v,{class:"content-box"},{default:o((()=>[n(k,{class:"content-text"},{default:o((()=>[h("使用变量控制SwipeAction的开启状态")])),_:1})])),_:1})])),_:1},8,["left-options","right-options","show","onChange","onClick"])])),_:1}),n(y,{title:"swipe-action 列表",type:"line"}),n(T,{ref:"swipeAction"},{default:o((()=>[(t(!0),i(a,null,l(g.swipeList,((s,i)=>(t(),e(S,{"right-options":s.options,key:s.id,onChange:t=>m.swipeChange(t,i),onClick:t=>m.swipeClick(t,i)},{default:o((()=>[n(v,{class:"content-box"},{default:o((()=>[n(k,{class:"content-text"},{default:o((()=>[h(d(s.content),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["right-options","onChange","onClick"])))),128))])),_:1},512)])),_:1})}],["__scopeId","data-v-2fa3d98c"]]);export{B as default};
