{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\后台\\src\\views\\question\\edit.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\后台\\src\\views\\question\\edit.vue","mtime":1752293339480},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\后台\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFF1ZXN0aW9uRGV0YWlsLCB1cGRhdGVRdWVzdGlvbiwgY3JlYXRlUXVlc3Rpb24gfSBmcm9tICdAL2FwaS9xdWVzdGlvbicKaW1wb3J0IHsgZ2V0QnlHcmFkZUFuZFNlbWVzdGVyIH0gZnJvbSAnQC9hcGkvY2F0ZWdvcnknCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1F1ZXN0aW9uRWRpdCcsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBjYXRlZ29yeUxvYWRpbmc6IGZhbHNlLAogICAgICBmb3JtRGF0YTogewogICAgICAgIHF1ZXN0aW9uSWQ6ICcnLAogICAgICAgIHRpdGxlOiAnJywKICAgICAgICBjb250ZW50OiAnJywKICAgICAgICBhbnN3ZXI6ICcnLAogICAgICAgIGFuYWx5c2lzOiAnJywKICAgICAgICB0b3BpY0NvbnRlbnQ6ICcnLCAgLy8g5Y+q6K+777yM5LiN5o+Q5LqkCiAgICAgICAgdG9waWNBbnN3ZXI6ICcnLCAgIC8vIOWPquivu++8jOS4jeaPkOS6pAogICAgICAgIHRvcGljQW5hbHlzaXM6ICcnLCAvLyDlj6ror7vvvIzkuI3mj5DkuqQKICAgICAgICB0eXBlVGV4dDogJycsCiAgICAgICAgY3JlYXRlVGltZTogJycsCiAgICAgICAgY2F0ZWdvcnlJZDogbnVsbCwgIC8vIOS/ruaUueS4umNhdGVnb3J5SWQKICAgICAgICBzdGF0dXNUZXh0OiAnJywKICAgICAgICBncmFkZVRleHQ6ICcnLAogICAgICAgIHNlbWVzdGVyOiAnbm9uZScsCiAgICAgICAgb3B0aW9uczogJycKICAgICAgfSwKICAgICAgZ3JhZGVzOiBbCiAgICAgICAgeyB2YWx1ZTogJzEnLCBsYWJlbDogJzHlubTnuqcnIH0sCiAgICAgICAgeyB2YWx1ZTogJzInLCBsYWJlbDogJzLlubTnuqcnIH0sCiAgICAgICAgeyB2YWx1ZTogJzMnLCBsYWJlbDogJzPlubTnuqcnIH0sCiAgICAgICAgeyB2YWx1ZTogJzQnLCBsYWJlbDogJzTlubTnuqcnIH0sCiAgICAgICAgeyB2YWx1ZTogJzUnLCBsYWJlbDogJzXlubTnuqcnIH0sCiAgICAgICAgeyB2YWx1ZTogJzYnLCBsYWJlbDogJzblubTnuqcnIH0KICAgICAgXSwKICAgICAgY2F0ZWdvcmllczogW10sCiAgICAgIG9yaWdpbmFsRGF0YToge30sCiAgICAgIGlkOiBudWxsLAogICAgICBpc0VkaXRNb2RlOiB0cnVlCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgcGFnZVRpdGxlKCkgewogICAgICBpZiAodGhpcy5pc0VkaXRNb2RlKSB7CiAgICAgICAgcmV0dXJuIGDpopjnm67nvJbovpEgLSAke3RoaXMuZm9ybURhdGEudGl0bGUgfHwgJ+aWsOmimOebrid9YAogICAgICB9CiAgICAgIHJldHVybiAn5paw5aKe6aKY55uuJwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMucXVlc3Rpb25faWQgfHwgdGhpcy4kcm91dGUucXVlcnkucXVlc3Rpb25faWQKICAgIHRoaXMuaXNFZGl0TW9kZSA9ICEhdGhpcy5pZAoKICAgIGlmICghdGhpcy5pc0VkaXRNb2RlKSB7CiAgICAgIC8vIOaWsOWinuaooeW8j++8jOWIneWni+WMluepuuihqOWNlQogICAgICB0aGlzLm9yaWdpbmFsRGF0YSA9IHsgLi4udGhpcy5mb3JtRGF0YSB9CiAgICAgIHJldHVybgogICAgfQoKICAgIHRoaXMuZmV0Y2hEYXRhKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGZldGNoRGF0YSgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICBnZXRRdWVzdGlvbkRldGFpbCh0aGlzLmlkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmZvcm1EYXRhID0gcmVzcG9uc2UuZGF0YQoKICAgICAgICAvLyDlpITnkIblubTnuqfmoLzlvI8KICAgICAgICBpZiAodGhpcy5mb3JtRGF0YS5ncmFkZVRleHQpIHsKICAgICAgICAgIGNvbnN0IGdyYWRlVmFsdWUgPSB0aGlzLmZvcm1EYXRhLmdyYWRlVGV4dC5yZXBsYWNlKCflubTnuqcnLCAnJykKICAgICAgICAgIHRoaXMuZm9ybURhdGEuZ3JhZGVUZXh0ID0gZ3JhZGVWYWx1ZQogICAgICAgIH0KCiAgICAgICAgLy8g56Gu5L+d5YiG57G7SUTmraPnoa4KICAgICAgICBpZiAodGhpcy5mb3JtRGF0YS5jYXRlZ29yeU5hbWUpIHsKICAgICAgICAgIC8vIOWmguaenOWQjuerr+i/lOWbnueahOaYr+WIhuexu+WQjeensO+8jOmcgOimgei9rOaNouS4uklECiAgICAgICAgICAvLyDov5nph4zlgYforr7lkI7nq6/ov5Tlm57kuobliIbnsbtJRAogICAgICAgICAgdGhpcy5mb3JtRGF0YS5jYXRlZ29yeUlkID0gdGhpcy5mb3JtRGF0YS5jYXRlZ29yeUlkIHx8IG51bGwKICAgICAgICB9CgogICAgICAgIC8vIOWmguaenOacieWIhuexu+S/oeaBr++8jOWwneivleWKoOi9veWvueW6lOeahOWIhuexuwogICAgICAgIGlmICh0aGlzLmZvcm1EYXRhLmdyYWRlVGV4dCAmJiB0aGlzLmZvcm1EYXRhLnNlbWVzdGVyKSB7CiAgICAgICAgICB0aGlzLmxvYWRDYXRlZ29yaWVzKHRoaXMuZm9ybURhdGEuZ3JhZGVUZXh0LCB0aGlzLmZvcm1EYXRhLnNlbWVzdGVyKQogICAgICAgIH0KCiAgICAgICAgdGhpcy5vcmlnaW5hbERhdGEgPSB7IC4uLnRoaXMuZm9ybURhdGEgfQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W6aKY55uu6K+m5oOF5aSx6LSlOicsIGVycm9yKQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPlumimOebruivpuaDheWksei0pTogJyArIChlcnJvci5tZXNzYWdlIHx8ICfmnKrnn6XplJnor68nKSkKICAgICAgfSkuZmluYWxseSgoKSA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgfSkKICAgIH0sCgogICAgaGFuZGxlR3JhZGVDaGFuZ2UoZ3JhZGUpIHsKICAgICAgaWYgKHRoaXMuZm9ybURhdGEuc2VtZXN0ZXIgJiYgdGhpcy5mb3JtRGF0YS5zZW1lc3RlciAhPT0gJ25vbmUnKSB7CiAgICAgICAgdGhpcy5sb2FkQ2F0ZWdvcmllcyhncmFkZSwgdGhpcy5mb3JtRGF0YS5zZW1lc3RlcikKICAgICAgfQogICAgfSwKCiAgICBoYW5kbGVTZW1lc3RlckNoYW5nZShzZW1lc3RlcikgewogICAgICAvLyDlrabmnJ/mlLnlj5jml7bph43nva7liIbnsbvpgInmi6kKICAgICAgdGhpcy5mb3JtRGF0YS5jYXRlZ29yeUlkID0gbnVsbAogICAgICB0aGlzLmNhdGVnb3JpZXMgPSBbXQoKICAgICAgaWYgKHRoaXMuZm9ybURhdGEuZ3JhZGVUZXh0ICYmIHNlbWVzdGVyICE9PSAnbm9uZScpIHsKICAgICAgICB0aGlzLmxvYWRDYXRlZ29yaWVzKHRoaXMuZm9ybURhdGEuZ3JhZGVUZXh0LCBzZW1lc3RlcikKICAgICAgfQogICAgfSwKCiAgICBsb2FkQ2F0ZWdvcmllcyhncmFkZSwgc2VtZXN0ZXIpIHsKICAgICAgdGhpcy5jYXRlZ29yeUxvYWRpbmcgPSB0cnVlCiAgICAgIGdldEJ5R3JhZGVBbmRTZW1lc3RlcihwYXJzZUludChncmFkZSksIHNlbWVzdGVyKQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMuY2F0ZWdvcmllcyA9IHJlc3BvbnNlLmRhdGEKICAgICAgICAgIGlmICh0aGlzLmNhdGVnb3JpZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbygn6K+l5bm057qn5ZKM5a2m5pyf5LiL5rKh5pyJ5om+5Yiw5YiG57G7JykKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5bliIbnsbvlpLHotKU6JywgZXJyb3IpCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bliIbnsbvlpLHotKU6ICcgKyAoZXJyb3IubWVzc2FnZSB8fCAn5pyq55+l6ZSZ6K+vJykpCiAgICAgICAgfSkKICAgICAgICAuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICB0aGlzLmNhdGVnb3J5TG9hZGluZyA9IGZhbHNlCiAgICAgICAgfSkKICAgIH0sCgogICAgc3VibWl0Rm9ybSgpIHsKICAgICAgLy8g5Zyo5o+Q5Lqk5YmN6L2s5o2i5bm057qn5qC85byPCiAgICAgIGNvbnN0IGZvcm1EYXRhQ29weSA9IHsgLi4udGhpcy5mb3JtRGF0YSB9CiAgICAgIGZvcm1EYXRhQ29weS5ncmFkZVRleHQgPSBmb3JtRGF0YUNvcHkuZ3JhZGVUZXh0ICsgJ+W5tOe6pycKCiAgICAgIC8vIOenu+mZpOS4jemcgOimgeaPkOS6pOeahOWtl+autQogICAgICBjb25zdCB7IHRvcGljQ29udGVudCwgdG9waWNBbnN3ZXIsIHRvcGljQW5hbHlzaXMsIC4uLnN1Ym1pdERhdGEgfSA9IGZvcm1EYXRhQ29weQoKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQoKICAgICAgY29uc3QgYWN0aW9uID0gdGhpcy5pc0VkaXRNb2RlCiAgICAgICAgPyB1cGRhdGVRdWVzdGlvbih0aGlzLmZvcm1EYXRhLnF1ZXN0aW9uSWQsIHN1Ym1pdERhdGEpCiAgICAgICAgOiBjcmVhdGVRdWVzdGlvbihzdWJtaXREYXRhKQoKICAgICAgYWN0aW9uLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcyh0aGlzLmlzRWRpdE1vZGUgPyAn6aKY55uu5pu05paw5oiQ5YqfJyA6ICfpopjnm67liJvlu7rmiJDlip8nKQogICAgICAgIHRoaXMuZ29CYWNrKCkKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+aTjeS9nOWksei0pTonLCBlcnJvcikKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGAke3RoaXMuaXNFZGl0TW9kZSA/ICfmm7TmlrAnIDogJ+WIm+W7uid96aKY55uu5aSx6LSlOiAke2Vycm9yLm1lc3NhZ2UgfHwgJ+acquefpemUmeivryd9YCkKICAgICAgfSkuZmluYWxseSgoKSA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgfSkKICAgIH0sCgogICAgcmVzZXRGb3JtKCkgewogICAgICB0aGlzLmZvcm1EYXRhID0geyAuLi50aGlzLm9yaWdpbmFsRGF0YSB9CiAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbygn5bey6YeN572u5Li65Y6f5aeL5pWw5o2uJykKICAgIH0sCgogICAgZ29CYWNrKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3F1ZXN0aW9uL2xpc3QnKQogICAgfQogIH0KfQo="},{"version":3,"sources":["edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuMA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"edit.vue","sourceRoot":"src/views/question","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-card shadow=\"never\" class=\"edit-card\">\n      <div class=\"header\">\n        <el-button type=\"text\" icon=\"el-icon-arrow-left\" @click=\"goBack\">返回列表</el-button>\n        <h2 class=\"title\">{{ pageTitle }}</h2>\n      </div>\n\n      <el-form ref=\"form\" :model=\"formData\" label-width=\"120px\" label-position=\"top\">\n        <el-row :gutter=\"20\">\n          <el-col :span=\"24\">\n            <el-form-item label=\"题目ID\" prop=\"questionId\">\n              <el-input\n                v-model=\"formData.questionId\"\n                :disabled=\"isEditMode\"\n                :placeholder=\"isEditMode ? '' : '请输入题目ID'\"\n              />\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"12\">\n            <el-form-item label=\"标题\" prop=\"title\" required>\n              <el-input v-model=\"formData.title\" placeholder=\"请输入题目标题\" />\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"6\">\n            <el-form-item label=\"类型\" prop=\"typeText\" required>\n              <el-select v-model=\"formData.typeText\" placeholder=\"请选择类型\">\n                <el-option label=\"选择题\" value=\"选择题\" />\n                <el-option label=\"填空题\" value=\"填空题\" />\n                <el-option label=\"判断题\" value=\"判断题\" />\n                <el-option label=\"主观题\" value=\"主观题\" />\n              </el-select>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"6\">\n            <el-form-item label=\"状态\" prop=\"statusText\" required>\n              <el-select v-model=\"formData.statusText\" placeholder=\"请选择状态\">\n                <el-option label=\"启用\" value=\"启用\" />\n                <el-option label=\"禁用\" value=\"禁用\" />\n              </el-select>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"6\">\n            <el-form-item label=\"年级\" prop=\"gradeText\" required>\n              <el-select\n                v-model=\"formData.gradeText\"\n                placeholder=\"请选择年级\"\n                @change=\"handleGradeChange\"\n              >\n                <el-option\n                  v-for=\"g in grades\"\n                  :key=\"g.value\"\n                  :label=\"g.label\"\n                  :value=\"g.value\"\n                />\n              </el-select>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"6\">\n            <el-form-item label=\"学期\" prop=\"semester\" required>\n              <el-select\n                v-model=\"formData.semester\"\n                placeholder=\"请选择学期\"\n                @change=\"handleSemesterChange\"\n              >\n                <el-option label=\"无\" value=\"none\" />\n                <el-option label=\"上学期\" value=\"fall\" />\n                <el-option label=\"下学期\" value=\"spring\" />\n              </el-select>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"12\">\n            <el-form-item label=\"分类\" prop=\"categoryId\" required>\n              <el-select\n                v-model=\"formData.categoryId\"\n                placeholder=\"请先选择年级和学期\"\n                :loading=\"categoryLoading\"\n                filterable\n                clearable\n              >\n                <el-option\n                  v-for=\"c in categories\"\n                  :key=\"c.categoryId\"\n                  :label=\"c.name\"\n                  :value=\"c.categoryId\"\n                />\n              </el-select>\n            </el-form-item>\n          </el-col>\n\n          <!-- 题目内容 -->\n          <el-col :span=\"24\">\n            <el-form-item label=\"题目内容\" prop=\"content\" required>\n              <el-input\n                v-model=\"formData.content\"\n                type=\"textarea\"\n                :rows=\"4\"\n                placeholder=\"请输入题目内容\"\n              />\n            </el-form-item>\n          </el-col>\n\n          <!-- 关联题目内容（只读） -->\n          <el-col :span=\"24\">\n            <el-form-item label=\"关联题目内容\" prop=\"topicContent\">\n              <el-input\n                :value=\"formData.topicContent\"\n                type=\"textarea\"\n                :rows=\"4\"\n                placeholder=\"关联题目内容\"\n                disabled\n              />\n            </el-form-item>\n          </el-col>\n\n          <!-- 题目答案 -->\n          <el-col :span=\"24\">\n            <el-form-item label=\"题目答案\" prop=\"answer\" required>\n              <el-input\n                v-model=\"formData.answer\"\n                type=\"textarea\"\n                :rows=\"3\"\n                placeholder=\"请输入题目答案\"\n              />\n            </el-form-item>\n          </el-col>\n\n          <!-- 关联题目答案（只读） -->\n          <el-col :span=\"24\">\n            <el-form-item label=\"关联题目答案\" prop=\"topicAnswer\">\n              <el-input\n                :value=\"formData.topicAnswer\"\n                type=\"textarea\"\n                :rows=\"3\"\n                placeholder=\"关联题目答案\"\n                disabled\n              />\n            </el-form-item>\n          </el-col>\n\n          <!-- 题目解析 -->\n          <el-col :span=\"24\">\n            <el-form-item label=\"题目解析\" prop=\"analysis\" required>\n              <el-input\n                v-model=\"formData.analysis\"\n                type=\"textarea\"\n                :rows=\"4\"\n                placeholder=\"请输入题目解析\"\n              />\n            </el-form-item>\n          </el-col>\n\n          <!-- 关联题目解析（只读） -->\n          <el-col :span=\"24\">\n            <el-form-item label=\"关联题目解析\" prop=\"topicAnalysis\">\n              <el-input\n                :value=\"formData.topicAnalysis\"\n                type=\"textarea\"\n                :rows=\"4\"\n                placeholder=\"关联题目解析\"\n                disabled\n              />\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"24\">\n            <el-form-item label=\"选项内容\" prop=\"options\">\n              <el-input\n                v-model=\"formData.options\"\n                type=\"textarea\"\n                :rows=\"3\"\n                placeholder=\"请输入选项内容（选择题需要）\"\n              />\n            </el-form-item>\n          </el-col>\n        </el-row>\n\n        <div class=\"form-footer\">\n          <el-button\n            type=\"primary\"\n            :loading=\"loading\"\n            @click=\"submitForm\"\n          >\n            {{ isEditMode ? '保存修改' : '创建题目' }}\n          </el-button>\n          <el-button @click=\"resetForm\">重置</el-button>\n        </div>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { getQuestionDetail, updateQuestion, createQuestion } from '@/api/question'\nimport { getByGradeAndSemester } from '@/api/category'\n\nexport default {\n  name: 'QuestionEdit',\n  data() {\n    return {\n      loading: false,\n      categoryLoading: false,\n      formData: {\n        questionId: '',\n        title: '',\n        content: '',\n        answer: '',\n        analysis: '',\n        topicContent: '',  // 只读，不提交\n        topicAnswer: '',   // 只读，不提交\n        topicAnalysis: '', // 只读，不提交\n        typeText: '',\n        createTime: '',\n        categoryId: null,  // 修改为categoryId\n        statusText: '',\n        gradeText: '',\n        semester: 'none',\n        options: ''\n      },\n      grades: [\n        { value: '1', label: '1年级' },\n        { value: '2', label: '2年级' },\n        { value: '3', label: '3年级' },\n        { value: '4', label: '4年级' },\n        { value: '5', label: '5年级' },\n        { value: '6', label: '6年级' }\n      ],\n      categories: [],\n      originalData: {},\n      id: null,\n      isEditMode: true\n    }\n  },\n  computed: {\n    pageTitle() {\n      if (this.isEditMode) {\n        return `题目编辑 - ${this.formData.title || '新题目'}`\n      }\n      return '新增题目'\n    }\n  },\n  created() {\n    this.id = this.$route.params.question_id || this.$route.query.question_id\n    this.isEditMode = !!this.id\n\n    if (!this.isEditMode) {\n      // 新增模式，初始化空表单\n      this.originalData = { ...this.formData }\n      return\n    }\n\n    this.fetchData()\n  },\n  methods: {\n    fetchData() {\n      this.loading = true\n      getQuestionDetail(this.id).then(response => {\n        this.formData = response.data\n\n        // 处理年级格式\n        if (this.formData.gradeText) {\n          const gradeValue = this.formData.gradeText.replace('年级', '')\n          this.formData.gradeText = gradeValue\n        }\n\n        // 确保分类ID正确\n        if (this.formData.categoryName) {\n          // 如果后端返回的是分类名称，需要转换为ID\n          // 这里假设后端返回了分类ID\n          this.formData.categoryId = this.formData.categoryId || null\n        }\n\n        // 如果有分类信息，尝试加载对应的分类\n        if (this.formData.gradeText && this.formData.semester) {\n          this.loadCategories(this.formData.gradeText, this.formData.semester)\n        }\n\n        this.originalData = { ...this.formData }\n      }).catch(error => {\n        console.error('获取题目详情失败:', error)\n        this.$message.error('获取题目详情失败: ' + (error.message || '未知错误'))\n      }).finally(() => {\n        this.loading = false\n      })\n    },\n\n    handleGradeChange(grade) {\n      if (this.formData.semester && this.formData.semester !== 'none') {\n        this.loadCategories(grade, this.formData.semester)\n      }\n    },\n\n    handleSemesterChange(semester) {\n      // 学期改变时重置分类选择\n      this.formData.categoryId = null\n      this.categories = []\n\n      if (this.formData.gradeText && semester !== 'none') {\n        this.loadCategories(this.formData.gradeText, semester)\n      }\n    },\n\n    loadCategories(grade, semester) {\n      this.categoryLoading = true\n      getByGradeAndSemester(parseInt(grade), semester)\n        .then(response => {\n          this.categories = response.data\n          if (this.categories.length === 0) {\n            this.$message.info('该年级和学期下没有找到分类')\n          }\n        })\n        .catch(error => {\n          console.error('获取分类失败:', error)\n          this.$message.error('获取分类失败: ' + (error.message || '未知错误'))\n        })\n        .finally(() => {\n          this.categoryLoading = false\n        })\n    },\n\n    submitForm() {\n      // 在提交前转换年级格式\n      const formDataCopy = { ...this.formData }\n      formDataCopy.gradeText = formDataCopy.gradeText + '年级'\n\n      // 移除不需要提交的字段\n      const { topicContent, topicAnswer, topicAnalysis, ...submitData } = formDataCopy\n\n      this.loading = true\n\n      const action = this.isEditMode\n        ? updateQuestion(this.formData.questionId, submitData)\n        : createQuestion(submitData)\n\n      action.then(() => {\n        this.$message.success(this.isEditMode ? '题目更新成功' : '题目创建成功')\n        this.goBack()\n      }).catch(error => {\n        console.error('操作失败:', error)\n        this.$message.error(`${this.isEditMode ? '更新' : '创建'}题目失败: ${error.message || '未知错误'}`)\n      }).finally(() => {\n        this.loading = false\n      })\n    },\n\n    resetForm() {\n      this.formData = { ...this.originalData }\n      this.$message.info('已重置为原始数据')\n    },\n\n    goBack() {\n      this.$router.push('/question/list')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.edit-card {\n  border-radius: 8px;\n  margin: 20px;\n}\n\n.header {\n  display: flex;\n  align-items: center;\n  margin-bottom: 30px;\n  padding-bottom: 15px;\n  border-bottom: 1px solid #ebeef5;\n}\n\n.header .title {\n  margin-left: 20px;\n  font-size: 20px;\n  color: #303133;\n}\n\n.form-footer {\n  margin-top: 30px;\n  text-align: center;\n}\n\n.el-form-item {\n  margin-bottom: 22px;\n}\n\n.el-divider {\n  margin: 30px 0;\n}\n</style>\n"]}]}